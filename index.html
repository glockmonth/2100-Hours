<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2100 Hours Leaderboard | PSRP</title>
<style>
/* ======= YOUR EXISTING STYLES HERE ======= */
:root {
  --blood-red: #d41f1f;
  --neon-red: #ff0000;
  --gold: #ffd700;
  --silver: #c0c0c0;
  --bronze: #cd7f32;
  --dark-bg: #0a0a0a;
  --charcoal: #1a1a1a;
  --light-gray: #cccccc;
  --hover-glow: 0 0 20px rgba(212, 31, 31, 0.6);
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, var(--dark-bg) 0%, #000000 100%);
  color: var(--light-gray);
  line-height: 1.6;
  overflow-x: hidden;
  min-height: 100vh;
}

header { /* ... keep your existing header styles ... */ }
.container { max-width: 1400px; margin: 3rem auto; padding: 0 2rem; }
/* include all your existing CSS above */
</style>
</head>
<body>
<header>
    <div class="header-content">
        <div class="logo">2100</div>
        <div class="subtitle">Weekly Hours Leaderboard</div>
    </div>
</header>

<div class="container">
    <div class="stats-bar">
        <div class="stat-card">
            <div class="stat-value" id="total-members">0</div>
            <div class="stat-label">Total Members</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="total-hours">0</div>
            <div class="stat-label">Total Hours This Week</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="avg-hours">0</div>
            <div class="stat-label">Average Hours/Member</div>
        </div>
    </div>

    <section class="podium-section">
        <h2 class="section-title">üèÜ Top Performers</h2>
        <div class="podium">
            <div class="podium-place first">
                <div class="rank-badge">1</div>
                <div class="player-name" id="top1-name">-</div>
                <div class="player-hours" id="top1-hours">0</div>
                <div class="hours-label">Hours This Week</div>
            </div>
            <div class="podium-place second">
                <div class="rank-badge">2</div>
                <div class="player-name" id="top2-name">-</div>
                <div class="player-hours" id="top2-hours">0</div>
                <div class="hours-label">Hours This Week</div>
            </div>
            <div class="podium-place third">
                <div class="rank-badge">3</div>
                <div class="player-name" id="top3-name">-</div>
                <div class="player-hours" id="top3-hours">0</div>
                <div class="hours-label">Hours This Week</div>
            </div>
        </div>
    </section>

    <section class="leaderboard-section">
        <h2 class="section-title">üìä Full Leaderboard</h2>
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th class="rank-cell">Rank</th>
                    <th>Member Name</th>
                    <th>Rank</th>
                    <th>Hours This Week</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body">
                <!-- Rows will be injected here -->
            </tbody>
        </table>
    </section>
</div>

<footer>
    <p>&copy; 2026 2100 Gang | Hours tracked weekly | Prizes distributed every Sunday</p>
</footer>

<script>
// ===== CSV SETTINGS =====
const CSV_URL = './statbot.csv'; // put your CSV in the repo root

// ===== PARSE CSV =====
async function loadCSV() {
    const res = await fetch(CSV_URL);
    const text = await res.text();
    const rows = text.split('\n');

    // Skip the first 4 lines of your CSV (headers)
    const dataRows = rows.slice(4);

    const members = dataRows.map(row => {
        const match = row.match(/^\d+,"?([^"]+)"?,\d+,(.+)$/);
        if (!match) return null;
        return {
            username: match[1].trim(),
            id: match[2].trim(),
            hours: parseFloat(match[3])
        };
    }).filter(Boolean);

    return members;
}

// ===== RENDER LEADERBOARD =====
function renderLeaderboard(members) {
    // Sort by hours descending
    members.sort((a,b)=> b.hours - a.hours);

    // Total members & hours
    const totalMembers = members.length;
    const totalHours = members.reduce((acc, m) => acc + m.hours, 0);
    const avgHours = (totalHours / totalMembers).toFixed(1);

    document.getElementById('total-members').textContent = totalMembers;
    document.getElementById('total-hours').textContent = totalHours.toFixed(1);
    document.getElementById('avg-hours').textContent = avgHours;

    // Top 3 podium
    for(let i=0;i<3;i++){
        const top = members[i];
        if(!top) continue;
        document.getElementById(`top${i+1}-name`).textContent = top.username;
        document.getElementById(`top${i+1}-hours`).textContent = top.hours.toFixed(1);
    }

    // Full leaderboard table
    const tbody = document.getElementById('leaderboard-body');
    tbody.innerHTML = '';
    members.forEach((m,i)=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td class="rank-cell">${i+1}</td>
            <td class="name-cell">${m.username}</td>
            <td>Member</td>
            <td class="hours-cell">${m.hours.toFixed(1)} hrs</td>
            <td style="color:#00ff00;">‚óè Active</td>
        `;
        tbody.appendChild(tr);
    });
}

// ===== INIT =====
async function init() {
    const members = await loadCSV();
    renderLeaderboard(members);
}

init();
</script>
</body>
</html>
